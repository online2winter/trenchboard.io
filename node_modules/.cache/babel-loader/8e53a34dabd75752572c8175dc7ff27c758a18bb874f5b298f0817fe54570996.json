{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getMutex = void 0;\nconst tslib_1 = require(\"tslib\");\nconst getMutex = () => {\n  const DEFAULT_ID = Symbol();\n  const locks = {};\n  return (...args_1) => tslib_1.__awaiter(void 0, [...args_1], void 0, function* (lockId = DEFAULT_ID) {\n    while (locks[lockId]) {\n      yield locks[lockId];\n    }\n    let resolve = () => {};\n    locks[lockId] = new Promise(res => {\n      resolve = res;\n    }).finally(() => {\n      delete locks[lockId];\n    });\n    return resolve;\n  });\n};\nexports.getMutex = getMutex;","map":{"version":3,"names":["Object","defineProperty","exports","value","getMutex","tslib_1","require","DEFAULT_ID","Symbol","locks","args_1","__awaiter","lockId","resolve","Promise","res","finally"],"sources":["/Users/papa/Desktop/trenchboard/trenchboard.io/node_modules/@trezor/utils/lib/getMutex.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getMutex = void 0;\nconst tslib_1 = require(\"tslib\");\nconst getMutex = () => {\n    const DEFAULT_ID = Symbol();\n    const locks = {};\n    return (...args_1) => tslib_1.__awaiter(void 0, [...args_1], void 0, function* (lockId = DEFAULT_ID) {\n        while (locks[lockId]) {\n            yield locks[lockId];\n        }\n        let resolve = () => { };\n        locks[lockId] = new Promise(res => {\n            resolve = res;\n        }).finally(() => {\n            delete locks[lockId];\n        });\n        return resolve;\n    });\n};\nexports.getMutex = getMutex;\n//# sourceMappingURL=getMutex.js.map"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,QAAQ,GAAG,KAAK,CAAC;AACzB,MAAMC,OAAO,GAAGC,OAAO,CAAC,OAAO,CAAC;AAChC,MAAMF,QAAQ,GAAGA,CAAA,KAAM;EACnB,MAAMG,UAAU,GAAGC,MAAM,CAAC,CAAC;EAC3B,MAAMC,KAAK,GAAG,CAAC,CAAC;EAChB,OAAO,CAAC,GAAGC,MAAM,KAAKL,OAAO,CAACM,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,GAAGD,MAAM,CAAC,EAAE,KAAK,CAAC,EAAE,WAAWE,MAAM,GAAGL,UAAU,EAAE;IACjG,OAAOE,KAAK,CAACG,MAAM,CAAC,EAAE;MAClB,MAAMH,KAAK,CAACG,MAAM,CAAC;IACvB;IACA,IAAIC,OAAO,GAAGA,CAAA,KAAM,CAAE,CAAC;IACvBJ,KAAK,CAACG,MAAM,CAAC,GAAG,IAAIE,OAAO,CAACC,GAAG,IAAI;MAC/BF,OAAO,GAAGE,GAAG;IACjB,CAAC,CAAC,CAACC,OAAO,CAAC,MAAM;MACb,OAAOP,KAAK,CAACG,MAAM,CAAC;IACxB,CAAC,CAAC;IACF,OAAOC,OAAO;EAClB,CAAC,CAAC;AACN,CAAC;AACDX,OAAO,CAACE,QAAQ,GAAGA,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}