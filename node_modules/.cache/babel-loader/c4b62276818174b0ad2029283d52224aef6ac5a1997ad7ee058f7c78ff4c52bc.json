{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport websocketService from '../utils/websocket';\nconst useNewCoinsData = () => {\n  _s();\n  const [data, setData] = useState({\n    coins: [],\n    loading: true,\n    error: null\n  });\n  const handleWebSocketMessage = useCallback(message => {\n    if (message.type === 'newToken') {\n      setData(prevData => ({\n        coins: [{\n          name: message.data.name,\n          address: message.data.address,\n          createdAt: message.data.timestamp,\n          initialPrice: message.data.initialPrice,\n          initialLiquidity: message.data.initialLiquidity\n        }, ...prevData.coins].slice(0, 5),\n        // Keep only the 5 most recent coins\n        loading: false,\n        error: null\n      }));\n    }\n  }, []);\n  useEffect(() => {\n    // Generate a unique ID for this subscriber\n    const subscriberId = Math.random().toString(36).substr(2, 9);\n\n    // Subscribe to WebSocket updates\n    websocketService.subscribe(subscriberId, handleWebSocketMessage);\n\n    // Set initial loading state\n    setData(prevData => ({\n      ...prevData,\n      loading: true\n    }));\n\n    // Cleanup: unsubscribe when component unmounts\n    return () => {\n      websocketService.unsubscribe(subscriberId);\n    };\n  }, [handleWebSocketMessage]);\n  return data;\n};\n_s(useNewCoinsData, \"mZYVeWRUq+XEGu126rSjbTpYzWg=\");\nexport default useNewCoinsData;","map":{"version":3,"names":["useState","useEffect","useCallback","websocketService","useNewCoinsData","_s","data","setData","coins","loading","error","handleWebSocketMessage","message","type","prevData","name","address","createdAt","timestamp","initialPrice","initialLiquidity","slice","subscriberId","Math","random","toString","substr","subscribe","unsubscribe"],"sources":["/Users/papa/Desktop/trenchboard/trenchboard.io/src/hooks/useNewCoinsData.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport websocketService from '../utils/websocket';\n\nconst useNewCoinsData = () => {\n  const [data, setData] = useState({\n    coins: [],\n    loading: true,\n    error: null\n  });\n\n  const handleWebSocketMessage = useCallback((message) => {\n    if (message.type === 'newToken') {\n      setData(prevData => ({\n        coins: [\n          {\n            name: message.data.name,\n            address: message.data.address,\n            createdAt: message.data.timestamp,\n            initialPrice: message.data.initialPrice,\n            initialLiquidity: message.data.initialLiquidity\n          },\n          ...prevData.coins\n        ].slice(0, 5), // Keep only the 5 most recent coins\n        loading: false,\n        error: null\n      }));\n    }\n  }, []);\n\n  useEffect(() => {\n    // Generate a unique ID for this subscriber\n    const subscriberId = Math.random().toString(36).substr(2, 9);\n\n    // Subscribe to WebSocket updates\n    websocketService.subscribe(subscriberId, handleWebSocketMessage);\n\n    // Set initial loading state\n    setData(prevData => ({\n      ...prevData,\n      loading: true\n    }));\n\n    // Cleanup: unsubscribe when component unmounts\n    return () => {\n      websocketService.unsubscribe(subscriberId);\n    };\n  }, [handleWebSocketMessage]);\n\n  return data;\n};\n\nexport default useNewCoinsData;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,OAAOC,gBAAgB,MAAM,oBAAoB;AAEjD,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC;IAC/BQ,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE,IAAI;IACbC,KAAK,EAAE;EACT,CAAC,CAAC;EAEF,MAAMC,sBAAsB,GAAGT,WAAW,CAAEU,OAAO,IAAK;IACtD,IAAIA,OAAO,CAACC,IAAI,KAAK,UAAU,EAAE;MAC/BN,OAAO,CAACO,QAAQ,KAAK;QACnBN,KAAK,EAAE,CACL;UACEO,IAAI,EAAEH,OAAO,CAACN,IAAI,CAACS,IAAI;UACvBC,OAAO,EAAEJ,OAAO,CAACN,IAAI,CAACU,OAAO;UAC7BC,SAAS,EAAEL,OAAO,CAACN,IAAI,CAACY,SAAS;UACjCC,YAAY,EAAEP,OAAO,CAACN,IAAI,CAACa,YAAY;UACvCC,gBAAgB,EAAER,OAAO,CAACN,IAAI,CAACc;QACjC,CAAC,EACD,GAAGN,QAAQ,CAACN,KAAK,CAClB,CAACa,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;QAAE;QACfZ,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE;MACT,CAAC,CAAC,CAAC;IACL;EACF,CAAC,EAAE,EAAE,CAAC;EAENT,SAAS,CAAC,MAAM;IACd;IACA,MAAMqB,YAAY,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;;IAE5D;IACAvB,gBAAgB,CAACwB,SAAS,CAACL,YAAY,EAAEX,sBAAsB,CAAC;;IAEhE;IACAJ,OAAO,CAACO,QAAQ,KAAK;MACnB,GAAGA,QAAQ;MACXL,OAAO,EAAE;IACX,CAAC,CAAC,CAAC;;IAEH;IACA,OAAO,MAAM;MACXN,gBAAgB,CAACyB,WAAW,CAACN,YAAY,CAAC;IAC5C,CAAC;EACH,CAAC,EAAE,CAACX,sBAAsB,CAAC,CAAC;EAE5B,OAAOL,IAAI;AACb,CAAC;AAACD,EAAA,CA9CID,eAAe;AAgDrB,eAAeA,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}