{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from 'react';\nimport websocketService from '../utils/websocket';\nconst useNewCoinsData = () => {\n  _s();\n  const [data, setData] = useState({\n    coins: [],\n    loading: true,\n    error: null\n  });\n  const handleWebSocketMessage = useCallback(message => {\n    console.log('WebSocket message received:', message);\n    if (message.type === 'newToken') {\n      console.log('New token data:', message.data);\n      setData(prevData => ({\n        coins: [{\n          name: message.data.name,\n          address: message.data.address,\n          createdAt: message.data.timestamp,\n          // Map timestamp to createdAt\n          initialPrice: message.data.initialPrice,\n          initialLiquidity: message.data.initialLiquidity\n        }, ...prevData.coins],\n        loading: false,\n        error: null\n      }));\n    }\n  }, []);\n  useEffect(() => {\n    console.log('Setting up WebSocket connection...');\n    // Generate a unique ID for this subscriber\n    const subscriberId = Math.random().toString(36).substr(2, 9);\n\n    // Subscribe to WebSocket updates\n    websocketService.subscribe(subscriberId, handleWebSocketMessage);\n\n    // Set initial loading state to false since we'll get immediate mock data\n    setData(prevData => ({\n      ...prevData,\n      loading: false\n    }));\n\n    // Cleanup: unsubscribe when component unmounts\n    return () => {\n      console.log('Cleaning up WebSocket connection...');\n      websocketService.unsubscribe(subscriberId);\n    };\n  }, [handleWebSocketMessage]);\n  return data;\n};\n_s(useNewCoinsData, \"mZYVeWRUq+XEGu126rSjbTpYzWg=\");\nexport default useNewCoinsData;","map":{"version":3,"names":["useState","useEffect","useCallback","websocketService","useNewCoinsData","_s","data","setData","coins","loading","error","handleWebSocketMessage","message","console","log","type","prevData","name","address","createdAt","timestamp","initialPrice","initialLiquidity","subscriberId","Math","random","toString","substr","subscribe","unsubscribe"],"sources":["/Users/papa/Desktop/trenchboard/trenchboard.io/src/hooks/useNewCoinsData.js"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport websocketService from '../utils/websocket';\n\nconst useNewCoinsData = () => {\n  const [data, setData] = useState({\n    coins: [],\n    loading: true,\n    error: null\n  });\n\n  const handleWebSocketMessage = useCallback((message) => {\n    console.log('WebSocket message received:', message);\n    if (message.type === 'newToken') {\n      console.log('New token data:', message.data);\n      setData(prevData => ({\n        coins: [\n          {\n            name: message.data.name,\n            address: message.data.address,\n            createdAt: message.data.timestamp, // Map timestamp to createdAt\n            initialPrice: message.data.initialPrice,\n            initialLiquidity: message.data.initialLiquidity\n          },\n          ...prevData.coins\n        ],\n        loading: false,\n        error: null\n      }));\n    }\n  }, []);\n\n  useEffect(() => {\n    console.log('Setting up WebSocket connection...');\n    // Generate a unique ID for this subscriber\n    const subscriberId = Math.random().toString(36).substr(2, 9);\n\n    // Subscribe to WebSocket updates\n    websocketService.subscribe(subscriberId, handleWebSocketMessage);\n\n    // Set initial loading state to false since we'll get immediate mock data\n    setData(prevData => ({\n      ...prevData,\n      loading: false\n    }));\n\n    // Cleanup: unsubscribe when component unmounts\n    return () => {\n      console.log('Cleaning up WebSocket connection...');\n      websocketService.unsubscribe(subscriberId);\n    };\n  }, [handleWebSocketMessage]);\n\n  return data;\n};\n\nexport default useNewCoinsData;"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,OAAOC,gBAAgB,MAAM,oBAAoB;AAEjD,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC5B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC;IAC/BQ,KAAK,EAAE,EAAE;IACTC,OAAO,EAAE,IAAI;IACbC,KAAK,EAAE;EACT,CAAC,CAAC;EAEF,MAAMC,sBAAsB,GAAGT,WAAW,CAAEU,OAAO,IAAK;IACtDC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEF,OAAO,CAAC;IACnD,IAAIA,OAAO,CAACG,IAAI,KAAK,UAAU,EAAE;MAC/BF,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEF,OAAO,CAACN,IAAI,CAAC;MAC5CC,OAAO,CAACS,QAAQ,KAAK;QACnBR,KAAK,EAAE,CACL;UACES,IAAI,EAAEL,OAAO,CAACN,IAAI,CAACW,IAAI;UACvBC,OAAO,EAAEN,OAAO,CAACN,IAAI,CAACY,OAAO;UAC7BC,SAAS,EAAEP,OAAO,CAACN,IAAI,CAACc,SAAS;UAAE;UACnCC,YAAY,EAAET,OAAO,CAACN,IAAI,CAACe,YAAY;UACvCC,gBAAgB,EAAEV,OAAO,CAACN,IAAI,CAACgB;QACjC,CAAC,EACD,GAAGN,QAAQ,CAACR,KAAK,CAClB;QACDC,OAAO,EAAE,KAAK;QACdC,KAAK,EAAE;MACT,CAAC,CAAC,CAAC;IACL;EACF,CAAC,EAAE,EAAE,CAAC;EAENT,SAAS,CAAC,MAAM;IACdY,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;IACjD;IACA,MAAMS,YAAY,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;;IAE5D;IACAxB,gBAAgB,CAACyB,SAAS,CAACL,YAAY,EAAEZ,sBAAsB,CAAC;;IAEhE;IACAJ,OAAO,CAACS,QAAQ,KAAK;MACnB,GAAGA,QAAQ;MACXP,OAAO,EAAE;IACX,CAAC,CAAC,CAAC;;IAEH;IACA,OAAO,MAAM;MACXI,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC;MAClDX,gBAAgB,CAAC0B,WAAW,CAACN,YAAY,CAAC;IAC5C,CAAC;EACH,CAAC,EAAE,CAACZ,sBAAsB,CAAC,CAAC;EAE5B,OAAOL,IAAI;AACb,CAAC;AAACD,EAAA,CAlDID,eAAe;AAoDrB,eAAeA,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}